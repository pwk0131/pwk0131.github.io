<!-- Switch the mode between dark and light. -->

<script>
  (function () {
    const MODE_KEY = 'mode';
    const MODE_ATTR = 'data-mode';
    const DARK_MODE = 'dark';
    const LIGHT_MODE = 'light';
    const ID = 'mode-toggle';

    function getMode() {
      return localStorage.getItem(MODE_KEY);
    }

    function setMode(mode) {
      document.documentElement.setAttribute(MODE_ATTR, mode);
      localStorage.setItem(MODE_KEY, mode);
    }

    function flipMode() {
      if (document.documentElement.getAttribute(MODE_ATTR) === DARK_MODE) {
        setMode(LIGHT_MODE);
      } else {
        setMode(DARK_MODE);
      }
    }

    // 초기화: 페이지 로드 시 저장된 테마 적용
    const storedMode = getMode();
    if (!storedMode) {
      setMode(LIGHT_MODE); // 저장된 값이 없으면 라이트 모드를 기본으로 설정
    } else {
      setMode(storedMode); // 저장된 값이 있으면 그 값을 적용
    }

    // DOM이 준비되면 버튼에 클릭 이벤트 직접 추가
    document.addEventListener('DOMContentLoaded', function () {
      const toggleBtn = document.querySelector('.mode-toggle');
      if (toggleBtn) {
        toggleBtn.addEventListener('click', flipMode);
      }
    });

  })();
</script>